# SPDX-FileCopyrightText: Copyright (c) 2025 Broadsage <opensource@broadsage.com>
#
# SPDX-License-Identifier: Apache-2.0
---
# tasks file for repository

- name: Copy template files to project root (if not excluded)
  ansible.builtin.template:
    src: "{{ item }}.j2"
    dest: "/tmp/{{ item }}"
    owner: "abc"
    group: "abc"
    mode: "0644"
  loop:
    - .gitignore
    - .dockerignore
    - requirements.txt
    - .pre-commit-config.yaml
    - CODE_OF_CONDUCT.md
    - SECURITY.md
    - CONTRIBUTING.md
  when: item not in template.exclude | default([])

- name: Create scripts directory
  ansible.builtin.file:
    path: "/tmp/scripts"
    state: directory
    owner: "abc"
    group: "abc"
    mode: "0755"

- name: Copy repository scripts (always deployed)
  ansible.builtin.template:
    src: "{{ item }}.j2"
    dest: "/tmp/scripts/{{ item }}"
    owner: "abc"
    group: "abc"
    mode: "0755"
  loop:
    - bump_version.py
